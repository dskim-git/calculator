# app.py
import math
import streamlit as st

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ê¸°ë³¸ ì„¤ì •
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.set_page_config(
    page_title="ìˆ˜í•™ ê³„ì‚°ê¸° ì›¹ì•±",
    page_icon="ğŸ§®",
    layout="centered",
)

st.title("ğŸ§® ìˆ˜í•™ ê³„ì‚°ê¸° ì›¹ì•±")
st.write("ì‚¬ì¹™ì—°ì‚°, ëª¨ë“ˆëŸ¬ ì—°ì‚°, ì§€ìˆ˜ ì—°ì‚°, ë¡œê·¸ ì—°ì‚°ì„ í•  ìˆ˜ ìˆëŠ” ê°„ë‹¨í•œ ê³„ì‚°ê¸°ì…ë‹ˆë‹¤.")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ì—°ì‚° ì„ íƒ
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
calc_type = st.sidebar.selectbox(
    "ê³„ì‚° ì¢…ë¥˜ë¥¼ ì„ íƒí•˜ì„¸ìš”",
    [
        "ì‚¬ì¹™ì—°ì‚°",
        "ëª¨ë“ˆëŸ¬ ì—°ì‚° (a mod n)",
        "ì§€ìˆ˜ ì—°ì‚° (a^b)",
        "ë¡œê·¸ ì—°ì‚° (log_b(a))",
    ],
)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ì‚¬ì¹™ì—°ì‚°
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
if calc_type == "ì‚¬ì¹™ì—°ì‚°":
    st.subheader("ì‚¬ì¹™ì—°ì‚°")

    op = st.selectbox(
        "ì—°ì‚°ì„ ì„ íƒí•˜ì„¸ìš”",
        ["ë§ì…ˆ (+)", "ëº„ì…ˆ (-)", "ê³±ì…ˆ (Ã—)", "ë‚˜ëˆ—ì…ˆ (Ã·)"],
    )

    a = st.number_input("ì²« ë²ˆì§¸ ìˆ˜ (a)", value=0.0, format="%.6f")
    b = st.number_input("ë‘ ë²ˆì§¸ ìˆ˜ (b)", value=0.0, format="%.6f")

    if st.button("ê³„ì‚°í•˜ê¸°", key="arithmetic"):
        if op == "ë§ì…ˆ (+)":
            result = a + b
            expr = f"{a} + {b} = {result}"
        elif op == "ëº„ì…ˆ (-)":
            result = a - b
            expr = f"{a} - {b} = {result}"
        elif op == "ê³±ì…ˆ (Ã—)":
            result = a * b
            expr = f"{a} Ã— {b} = {result}"
        else:  # ë‚˜ëˆ—ì…ˆ
            if b == 0:
                st.error("0ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
                result = None
                expr = None
            else:
                result = a / b
                expr = f"{a} Ã· {b} = {result}"

        if expr is not None:
            st.success("ê³„ì‚° ê²°ê³¼")
            st.latex(expr)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ëª¨ë“ˆëŸ¬ ì—°ì‚°
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
elif calc_type == "ëª¨ë“ˆëŸ¬ ì—°ì‚° (a mod n)":
    st.subheader("ëª¨ë“ˆëŸ¬ ì—°ì‚°  (a mod n)")

    a_int = st.number_input("í”¼ì œìˆ˜ a (ì •ìˆ˜)", value=0, step=1)
    n_int = st.number_input("ë²• n (ì–‘ì˜ ì •ìˆ˜)", value=1, min_value=1, step=1)

    if st.button("ê³„ì‚°í•˜ê¸°", key="mod"):
        # Streamlitì˜ number_inputì€ ê¸°ë³¸ì ìœ¼ë¡œ floatì´ê¸° ë•Œë¬¸ì— intë¡œ ìºìŠ¤íŒ…
        a_int = int(a_int)
        n_int = int(n_int)

        result = a_int % n_int
        st.success("ê³„ì‚° ê²°ê³¼")
        st.latex(f"{a_int} \\bmod {n_int} = {result}")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ì§€ìˆ˜ ì—°ì‚°
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
elif calc_type == "ì§€ìˆ˜ ì—°ì‚° (a^b)":
    st.subheader("ì§€ìˆ˜ ì—°ì‚°  (a^b)")

    base = st.number_input("ë°‘ a", value=2.0, format="%.6f")
    exp = st.number_input("ì§€ìˆ˜ b", value=3.0, format="%.6f")

    if st.button("ê³„ì‚°í•˜ê¸°", key="power"):
        try:
            result = base ** exp
            st.success("ê³„ì‚° ê²°ê³¼")
            st.latex(f"{base}^{{{exp}}} = {result}")
        except OverflowError:
            st.error("ê°’ì´ ë„ˆë¬´ ì»¤ì„œ ê³„ì‚°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ë¡œê·¸ ì—°ì‚°
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
elif calc_type == "ë¡œê·¸ ì—°ì‚° (log_b(a))":
    st.subheader("ë¡œê·¸ ì—°ì‚°  (log_b(a))")

    x = st.number_input("ì§„ìˆ˜ a (> 0)", value=8.0, format="%.6f")
    base = st.number_input("ë°‘ b (> 0, b â‰  1)", value=2.0, format="%.6f")

    if st.button("ê³„ì‚°í•˜ê¸°", key="log"):
        if x <= 0:
            st.error("ì§„ìˆ˜ aëŠ” 0ë³´ë‹¤ ì»¤ì•¼ í•©ë‹ˆë‹¤.")
        elif base <= 0 or base == 1:
            st.error("ë°‘ bëŠ” 0ë³´ë‹¤ í¬ê³  1ì´ ì•„ë‹ˆì–´ì•¼ í•©ë‹ˆë‹¤.")
        else:
            result = math.log(x, base)  # math.log(x, base)
            st.success("ê³„ì‚° ê²°ê³¼")
            st.latex(f"\\log_{{{base}}} {x} = {result}")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ì‚¬ìš©ë²• ì•ˆë‚´
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
with st.expander("â„¹ï¸ ì‚¬ìš© ë°©ë²•"):
    st.markdown(
        """
        - **ì‚¬ì¹™ì—°ì‚°**: ë‘ ì‹¤ìˆ˜ë¥¼ ì…ë ¥í•˜ê³  ì—°ì‚°ì„ ì„ íƒí•œ ë’¤ **ê³„ì‚°í•˜ê¸°** ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.  
        - **ëª¨ë“ˆëŸ¬ ì—°ì‚°**: ì •ìˆ˜ a, ì–‘ì˜ ì •ìˆ˜ nì„ ì…ë ¥í•˜ê³  `a mod n` ê°’ì„ êµ¬í•©ë‹ˆë‹¤.  
        - **ì§€ìˆ˜ ì—°ì‚°**: ì‹¤ìˆ˜ a, bì— ëŒ€í•´ \(a^b\) ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.  
        - **ë¡œê·¸ ì—°ì‚°**: \(\log_b a\) ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤. (a > 0, b > 0, b â‰  1)
        """
    )

if __name__ == "__main__":
    # ìŠ¤íŠ¸ë¦¼ë¦¿ì€ ë³´í†µ `streamlit run app.py`ë¡œ ì‹¤í–‰í•˜ë¯€ë¡œ
    # ì—¬ê¸°ì— ë³„ë„ ì½”ë“œëŠ” í•„ìš” ì—†ì§€ë§Œ, êµ¬ì¡°ìƒ ë‚¨ê²¨ë‘ì—ˆìŠµë‹ˆë‹¤.
    pass
